<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico">
  <link rel="mask-icon" href="/favicon.ico" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"lchml.com","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"disqus","storage":true,"lazyload":false,"nav":null,"activeClass":"disqus"},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3437461276610909"
     crossorigin="anonymous"></script>
    <meta name="description" content="作为服务器开发人员，对配置文件一定不陌生，也一定曾经踩过很多配置文件的坑。">
<meta property="og:type" content="article">
<meta property="og:title" content="配置中心">
<meta property="og:url" content="https://lchml.com/technology/disconf/index.html">
<meta property="og:site_name" content="旅行的代码">
<meta property="og:description" content="作为服务器开发人员，对配置文件一定不陌生，也一定曾经踩过很多配置文件的坑。">
<meta property="og:locale">
<meta property="article:published_time" content="2016-04-21T16:00:00.000Z">
<meta property="article:modified_time" content="2022-05-12T06:05:34.547Z">
<meta property="article:author" content="李城">
<meta property="article:tag" content="李城">
<meta property="article:tag" content="disconf">
<meta property="article:tag" content="服务发现">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://lchml.com/technology/disconf/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-Hans","comments":true,"permalink":"https://lchml.com/technology/disconf/","path":"technology/disconf/","title":"配置中心"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>配置中心 | 旅行的代码</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-71702178-1"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-71702178-1","only_pageview":false}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">旅行的代码</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">李城的博客</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83"><span class="nav-number">1.</span> <span class="nav-text">实现配置中心</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91%E6%89%93%E5%8C%85"><span class="nav-number">1.1.</span> <span class="nav-text">源码编译打包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%83%A8%E7%BD%B2"><span class="nav-number">1.2.</span> <span class="nav-text">部署</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%87%86%E5%A4%87"><span class="nav-number">1.2.1.</span> <span class="nav-text">数据库准备</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#zookeeper%E5%87%86%E5%A4%87"><span class="nav-number">1.2.2.</span> <span class="nav-text">zookeeper准备</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#redis%E5%87%86%E5%A4%87"><span class="nav-number">1.2.3.</span> <span class="nav-text">redis准备</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#tomcat%E9%83%A8%E7%BD%B2"><span class="nav-number">1.2.4.</span> <span class="nav-text">tomcat部署</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#nginx%E9%83%A8%E7%BD%B2"><span class="nav-number">1.2.5.</span> <span class="nav-text">nginx部署</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8"><span class="nav-number">1.2.6.</span> <span class="nav-text">启动</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8"><span class="nav-number">1.3.</span> <span class="nav-text">应用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">2.</span> <span class="nav-text">总结</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="李城"
      src="/lc-icon.jpg">
  <p class="site-author-name" itemprop="name">李城</p>
  <div class="site-description" itemprop="description">知行合一</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">101</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">136</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/licheng-xd" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;licheng-xd" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:licheng_xd@163.com" title="E-Mail → mailto:licheng_xd@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://500px.me/lchml" title="500px → https:&#x2F;&#x2F;500px.me&#x2F;lchml" rel="noopener" target="_blank"><i class="fab fa-500px fa-fw"></i>500px</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://jandan.net/" title="Jandan → https:&#x2F;&#x2F;jandan.net" rel="noopener" target="_blank"><i class="fa fa-transgender-alt fa-fw"></i>Jandan</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/4qg55j4w/home?wvr=5" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;4qg55j4w&#x2F;home?wvr&#x3D;5" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://blog.qingtian16265.com/" title="晴天博客 → https:&#x2F;&#x2F;blog.qingtian16265.com&#x2F;" rel="noopener" target="_blank"><i class="fab fa-leanpub fa-fw"></i>晴天博客</a>
      </span>
  </div>



        </div>
      </div>

      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3437461276610909"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3437461276610909"
     data-ad-slot="5369128557"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://lchml.com/technology/disconf/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/lc-icon.jpg">
      <meta itemprop="name" content="李城">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="旅行的代码">
      <meta itemprop="description" content="知行合一">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="配置中心 | 旅行的代码">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          配置中心
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2016-04-22 00:00:00" itemprop="dateCreated datePublished" datetime="2016-04-22T00:00:00+08:00">2016-04-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/technology/" itemprop="url" rel="index"><span itemprop="name">technology</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>作为服务器开发人员，对配置文件一定不陌生，也一定曾经踩过很多配置文件的坑。</p>
<span id="more"></span>

<p>当服务器集群数量较少，系统采用all in one的架构时，我们可以采用每台服务器单独使用本地配置的方法，配置文件跟发布包一起采用用VCS管理。但是随着服务器集群的扩展，当服务器数量变的庞大时，all in one的架构会变的笨重臃肿，带来更新发布流程复杂，雪崩风险升高等问题。这时all in one的架构就不那么适用了。我们需要考虑对系统进行改造，做微服务化的分解。这时配置文件和配置项等就不再适合使用前面的方案。而是需要一个独立的配置中心对所有微服务的配置进行控制。</p>
<p>目前开源世界中已经有许多成熟的配置中心实现方案，如阿里的Diamond、360的QConf、spring的Cloud Config、百度的disconf等等。其中的区别这里就不一一对比了，每个都能完成对应的任务，选择适合自己情况的即可。由于我们服务90%是基于java的，disconf的推模式比Diamond的拉模式在效率上要高一些，同时disconf也更便于做二次开发，所以选择了disconf。</p>
<h2 id="实现配置中心"><a href="#实现配置中心" class="headerlink" title="实现配置中心"></a>实现配置中心</h2><p>配置中心的功能很简单，一句话概括就是：负责管理所有服务的配置。</p>
<h3 id="源码编译打包"><a href="#源码编译打包" class="headerlink" title="源码编译打包"></a>源码编译打包</h3><p>首先到github上找到disconf的源码，并fork一份到自己的git仓库（这样可以便于自己调试开发），然后在用于部署配置中心的服务器上clone一份源码。目录结构如下：</p>
<pre><code>/Users/lc/disconf/
    + disconf-src
    + resources
    + war
    + deploy.sh
</code></pre>
<p>disconf-src是源码目录，resources是配置目录，包含以下四个配置文件：</p>
<ul>
<li>jdbc-mysql.properties (数据库配置)</li>
<li>redis-config.properties (Redis配置)</li>
<li>zoo.properties (Zookeeper配置)</li>
<li>application.properties (应用配置）</li>
</ul>
<p>war是部署目录。deploy.sh是打包脚本，内容如下：</p>
<pre><code>ONLINE_CONFIG_PATH=/Users/lc/disconf/resources
WAR_ROOT_PATH=/Users/lc/disconf/war
export ONLINE_CONFIG_PATH
export WAR_ROOT_PATH
cd disconf-src/disconf-web
sh deploy/deploy.sh
</code></pre>
<p>运行deploy.sh脚本进行编译打包，最后会在war文件夹中生成部署用的文件。</p>
<h3 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h3><p>部署之前需要先安装依赖的软件：MySQL、Tomcat、Nginx、zookeeper、Redis（如果是线上环境使用，那么这些依赖软件的部署需要考虑高可用问题），具体安装过程这里就不说了。</p>
<h4 id="数据库准备"><a href="#数据库准备" class="headerlink" title="数据库准备"></a>数据库准备</h4><p>安装完mysql之后，需要对数据库进行初始化。先后执行disconf-src&#x2F;disconf-web&#x2F;sql中的sql文件：</p>
<ul>
<li>1-init_table.sql                主要是生成tables</li>
<li>2-data.sql                      主要是生成测试数据</li>
<li>20141201&#x2F;disconf.sql            升级，支持 管理员角色、用户邮箱</li>
<li>20141226&#x2F;disconf.sql            升级，支持 URL权限控制</li>
<li>20150101&#x2F;disconf.sql            增加一个测试数据</li>
<li>20150320&#x2F;disconf.sql            增加reloadable config的测试文件</li>
</ul>
<h4 id="zookeeper准备"><a href="#zookeeper准备" class="headerlink" title="zookeeper准备"></a>zookeeper准备</h4><p>安装好zookeeper集群后，在resources目录下的zoo.properties中配置好所有的zookeeper地址，并指定路径前缀:</p>
<pre><code>hosts=127.0.0.1:8581 # 测试用，所以只配置了一台zookeeper
zookeeper_url_prefix=/disconf
</code></pre>
<h4 id="redis准备"><a href="#redis准备" class="headerlink" title="redis准备"></a>redis准备</h4><p>redis在这里只作为账号登录缓存使用，所以没有也没关系，可以先不部署。</p>
<h4 id="tomcat部署"><a href="#tomcat部署" class="headerlink" title="tomcat部署"></a>tomcat部署</h4><p>数据库准备好之后，接着部署tomcat，在server.xml文件的host节点下增加Context：<code>&lt;Context path=&quot;&quot; docBase=&quot;/Users/lc/disconf/war&quot;/&gt;</code>设定好tomcat端口后启动tomcat</p>
<h4 id="nginx部署"><a href="#nginx部署" class="headerlink" title="nginx部署"></a>nginx部署</h4><p>disconf-web的部署采用了前后端完全分离的模式，所以前端页面直接通过nginx访问。在nginx中增加如下配置：</p>
<pre><code>upstream disconf &#123;
    server 127.0.0.1:8085;
&#125;

server &#123;
    listen       8081;
    server_name  localhost;

    location / &#123;
        root /Users/lc/disconf/war/html;
        if ($query_string) &#123;
            expires max;
        &#125;
    &#125;

    location ~ ^/(api|export) &#123;
        proxy_pass_header Server;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Scheme $scheme;
        proxy_pass http://disconf;
    &#125;
&#125;
</code></pre>
<h4 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h4><p>上述过程完成后，访问nginx的监听地址即可进入disconf的管理页面。</p>
<h3 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h3><p>部署完disconf-web，接下来我们需要在自己的服务中集成disconf-clent实现配置管理。disconf-client分为注解式注入和xml配置文件注入两种方式，并且两种方式都支持配置文件和配置项的管理。通过disconf-spring-boot-web可以感受简单的使用示例，只需要修改配置文件disconf.properties中的conf_server_host为上面部署的nginx地址然后运行，成功获取到配置中心的配置后，在disconf-web上对应的配置实例列表可以看到。</p>
<p>由于是系统的改造过程，所以并不适合采用demo中的直接在JavaBean的get方法上注解每个配置项的方法。为了适应原有系统的逻辑，我们需要的是配置文件的统一管理，同时又能让配置及时生效。因此结合disconf的特性和原有系统的特性，选择用基于注解的配置类和回调类实现配置文件的管理。首先在pom文件中增加disconf-client的依赖，然后在工程中增加WebApiConfig和WebApiConfigCallback两个类：</p>
<pre><code>@Service
@DisconfFile(filename = &quot;web-api.xml&quot;)
public class WebApiConfig &#123;

&#125;

@DisconfUpdateService(classes = &#123; WebApiConfig.class&#125;, confFileKeys = &#123;&quot;testJson.json&quot;&#125;)
public class WebApiConfigCallback implements IDisconfUpdate &#123;

    public void reload() throws Exception &#123;
        System.out.println(&quot;config update callback, do reload here&quot;); // 回调重载配置
    &#125;

&#125;
</code></pre>
<p>对于基于springmvc的web工程，由于disconf必须在最先启动，所以在web.xml的最前面增加如下配置：</p>
<pre><code>&lt;context-param&gt;
    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
    &lt;param-value&gt;classpath*:disconf.xml&lt;/param-value&gt;
&lt;/context-param&gt;

&lt;listener&gt;
    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;
&lt;/listener&gt;
</code></pre>
<p>同时在classpath下增加disconf.properties和disconf.xml两个配置文件。具体配置这里就不贴了，看demo就知道了。最后启动应用时（别忘了在log4j的配置中增加com.baidu的log）就可以看到应用会先从配置中心下载web-api.xml文件到classpath，然后开始初始化进程。接着我们来测试回调的使用，在disconf页面上找到对应的配置文件web-api.xml，修改它的内容就可以看到所有使用该配置的服务触发了回调方法。</p>
<p>上面的使用都是基于spring的应用，如果原工程是非spring的怎么办呢？很简单，手动载入disconf即可。在main方法的最前面调用如下方法：</p>
<pre><code>// 初始化disconf
private static void contextInitialized() &#123;
    String[] fn = new String[] &#123;&quot;disconf.xml&quot;&#125;;
    new ClassPathXmlApplicationContext(fn);
&#125;
</code></pre>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>配置中心的部署实现相对比较简单，但是它是微服务化过程中不可缺少的一部分。在实践过程中我们需要考虑怎么使用配置中心才能最合理的适配原有的系统，哪些配置文件和配置项适合用或应该用配置中心管理，disconf的功能能否满足系统的需求，是否需要做二次开发等等，这些问题都应该充分考虑到。同时在学习使用disconf的过程中，可以想想有哪些优秀的架构设计可以学习借鉴。</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div></div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="/donate-page/simple/images/wechat.jpg" alt="李城 微信">
        <span>微信</span>
      </div>
      <div>
        <img src="/donate-page/simple/images/alipay.jpg" alt="李城 支付宝">
        <span>支付宝</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/tags/%E6%9D%8E%E5%9F%8E/" rel="tag"><i class="fa fa-tag"></i> 李城</a>
              <a href="/tags/disconf/" rel="tag"><i class="fa fa-tag"></i> disconf</a>
              <a href="/tags/%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0/" rel="tag"><i class="fa fa-tag"></i> 服务发现</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/technology/netty2/" rel="prev" title="Netty源码分析·贰">
                  <i class="fa fa-chevron-left"></i> Netty源码分析·贰
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/life/travel-in-japan-1/" rel="next" title="带XML去旅行之日本（上）">
                  带XML去旅行之日本（上） <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>





<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3437461276610909"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-3437461276610909"
     data-ad-slot="4281038472"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
    
  <div class="comments" id="disqus_thread">
    <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
  </div>
  
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa-solid fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">李城</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script>

  





  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"cdn":"//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML","tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"lchml","count":false,"i18n":{"disqus":"disqus"}}</script>
<script src="/js/third-party/comments/disqus.js"></script>

</body>
</html>
